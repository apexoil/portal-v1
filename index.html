<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aprax Institutional | Asset Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --navy: #001a38; --gold: #c5a059; --up: #0ecb81; --down: #f6465d; 
            --bg: #060a0f; --card: #12161c; --text: #eaecef; --dim: #848e9c; 
            --border: #2b3139; --header-bg: #0b1118;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Hiragino Sans', 'Meiryo', sans-serif; }
        body { background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; position: fixed; width: 100%; }

        /* --- AUTH GATE --- */
        #auth-gate { position: fixed; inset: 0; background: var(--bg); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .login-box { background: var(--card); padding: 40px; border-radius: 12px; width: 100%; max-width: 420px; text-align: center; border: 1px solid var(--border); box-shadow: 0 25px 50px rgba(0,0,0,0.8); }
        .login-input { width: 100%; background: #1c2127; border: 1px solid var(--border); padding: 16px; color: white; border-radius: 8px; margin: 10px 0; font-size: 16px; }
        .btn-access { width: 100%; padding: 18px; background: var(--gold); color: black; border: none; border-radius: 8px; font-weight: 900; cursor: pointer; }

        /* --- LAYOUT --- */
        .terminal { height: 100%; display: flex; flex-direction: column; opacity: 0; transition: 1s ease; }
        header { padding: 15px 25px; background: var(--header-bg); border-bottom: 2px solid var(--gold); display: flex; justify-content: space-between; align-items: center; }
        .viewport { flex: 1; overflow-y: auto; padding-bottom: 110px; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }

        /* --- HEADINGS EN/JP --- */
        .header-main { display: flex; align-items: baseline; gap: 8px; margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
        .header-main h2 { font-size: 20px; font-weight: 900; text-transform: uppercase; }
        .header-main span { color: var(--dim); font-size: 12px; }

        /* --- ASSET CARD --- */
        .equity-hero { background: linear-gradient(135deg, #12161c 0%, #001a38 100%); padding: 35px; border-radius: 15px; border: 1px solid var(--border); margin-bottom: 25px; }
        .equity-main { font-size: clamp(32px, 8vw, 48px); font-weight: 900; letter-spacing: -1px; color: #fff; margin: 10px 0; }

        /* --- GRIDS --- */
        .data-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 25px; }
        @media (min-width: 768px) { .data-grid { grid-template-columns: repeat(4, 1fr); } }
        .data-card { background: var(--card); border: 1px solid var(--border); padding: 20px; border-radius: 12px; }
        .data-card label { font-size: 10px; color: var(--dim); text-transform: uppercase; display: block; margin-bottom: 5px; }

        /* --- CHART --- */
        .chart-frame { background: #000; border: 1px solid var(--border); border-radius: 12px; height: 320px; margin-bottom: 25px; padding: 20px; overflow: hidden; }
        .candle-container { display: flex; align-items: flex-end; gap: 4px; height: 220px; margin-top: 20px; }
        .candle { flex: 1; background: var(--up); transition: height 0.3s; min-width: 6px; }

        /* --- TRADING ACTIVITY --- */
        .history-card { background: var(--card); border-radius: 12px; border: 1px solid var(--border); }
        .history-row { display: flex; justify-content: space-between; padding: 18px 20px; border-bottom: 1px solid #1e2329; align-items: center; }
        .side-buy { color: var(--up); font-weight: 900; font-size: 11px; border: 1px solid var(--up); padding: 2px 5px; border-radius: 3px; margin-right: 5px; }
        .side-sell { color: var(--down); font-weight: 900; font-size: 11px; border: 1px solid var(--down); padding: 2px 5px; border-radius: 3px; margin-right: 5px; }

        /* --- NOTIF --- */
        .alert-toast { position: fixed; top: 85px; right: 20px; background: var(--card); border-left: 4px solid var(--gold); padding: 15px; border-radius: 4px; font-size: 12px; z-index: 2000; display: none; width: 280px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }

        /* --- ACTION BAR --- */
        .dock { position: fixed; bottom: 0; width: 100%; background: #0b1118; border-top: 1px solid var(--border); display: flex; padding: 15px 20px; gap: 15px; }
        .btn-dock { flex: 1; padding: 18px; border-radius: 10px; border: none; font-weight: 900; font-size: 14px; cursor: pointer; color: white; }

        /* --- MODALS --- */
        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 5000; overflow-y: auto; }
        .overlay.active { display: flex; flex-direction: column; }
        .modal-body { padding: 40px 25px; max-width: 500px; margin: auto; width: 100%; }

        /* --- ADMIN --- */
        #admin { position: fixed; top: -100%; left: 0; width: 100%; height: 60%; background: #000; z-index: 20000; padding: 40px; border-bottom: 3px solid var(--gold); transition: 0.5s; }
        #admin.open { top: 0; }
    </style>
</head>
<body>

    <div id="toast" class="alert-toast">
        <strong style="color:var(--gold)">MARKET ALERT:</strong><br>WTI Inventory volatility detected. Institutional hedges updated.
    </div>

    <div id="auth-gate">
        <div class="login-box">
            <h1 style="color:var(--gold); font-size:24px; margin-bottom:5px;">APRAX ENERGY</h1>
            <p style="color:var(--dim); font-size:11px; margin-bottom:25px;">Institutional Access Portfolio</p>
            <input type="email" id="email-in" class="login-input" placeholder="Corporate Email">
            <input type="password" class="login-input" placeholder="Access Key">
            <button class="btn-access" onclick="doLogin()">Authorize Terminal</button>
        </div>
    </div>

    <div class="terminal" id="main-ui">
        <header>
            <div onclick="adminTap()" style="font-weight: 900; letter-spacing: 1px;">APRAX <span style="color:var(--gold)">ENERGY</span></div>
            <div style="font-size:10px; color:var(--up); font-weight:bold;">● ENCRYPTED NODE</div>
        </header>

        <div class="viewport">
            <div class="container">
                
                <div class="header-main"><h2>Assets</h2><span>[保有資産]</span></div>
                
                <div class="equity-hero">
                    <p style="font-size: 10px; color: var(--dim); letter-spacing: 2px;">TOTAL NET EQUITY (JPY)</p>
                    <div class="equity-main" id="live-bal">¥9,425,037</div>
                    <div style="display:flex; gap:20px; margin-top:15px;">
                        <div><p style="font-size:10px; color:var(--dim);">Profit</p><b style="color:var(--up);">+¥1,850,000</b></div>
                        <div><p style="font-size:10px; color:var(--dim);">ROI</p><b style="color:var(--up);">+24.52%</b></div>
                    </div>
                </div>

                <div class="data-grid">
                    <div class="data-card"><label>Invested [原資]</label><b>¥7,575,000</b></div>
                    <div class="data-card"><label>Leverage [レバ]</label><b>1:100 Institutional</b></div>
                    <div class="data-card"><label>Status [ステータス]</label><b style="color:var(--gold);">Verified</b></div>
                    <div class="data-card"><label>Risk [リスク]</label><b>Low-Moderate</b></div>
                </div>

                <div class="header-main"><h2>Performance</h2><span>[市場チャート]</span></div>
                <div class="chart-frame">
                    <div style="display:flex; justify-content:space-between; font-size:11px; color:var(--dim);">
                        <span>OIL/USD Spot Contract</span>
                        <span id="price-tick">$78.42</span>
                    </div>
                    <div class="candle-container" id="candles"></div>
                </div>

                <div class="header-main"><h2>Activity</h2><span>[最新の取引履歴]</span></div>
                <div class="history-card">
                    <div class="history-row">
                        <div><span class="side-buy">BUY</span> <b>WTI Crude Oil</b><br><small style="color:var(--dim)">2026/02/14 10:44</small></div>
                        <div style="text-align:right;"><b>¥2,250,000</b><div style="color:var(--up); font-size:11px;">+¥562,500</div></div>
                    </div>
                    <div class="history-row">
                        <div><span class="side-sell">SELL</span> <b>Natural Gas Spot</b><br><small style="color:var(--dim)">2026/02/13 15:20</small></div>
                        <div style="text-align:right;"><b>¥1,500,000</b><div style="color:var(--down); font-size:11px;">-¥42,000</div></div>
                    </div>
                    <div class="history-row">
                        <div><span class="side-buy">BUY</span> <b>Petro-Refining B1</b><br><small style="color:var(--dim)">2026/02/11 09:12</small></div>
                        <div style="text-align:right;"><b>¥3,000,000</b><div style="color:var(--up); font-size:11px;">+¥750,000</div></div>
                    </div>
                    <div class="history-row">
                        <div><span class="side-buy">BUY</span> <b>Brent Spot</b><br><small style="color:var(--dim)">2026/02/09 11:30</small></div>
                        <div style="text-align:right;"><b>¥1,800,000</b><div style="color:var(--up); font-size:11px;">+¥450,000</div></div>
                    </div>
                </div>

            </div>
        </div>

        <div class="dock">
            <button class="btn-dock" style="background:var(--up);" onclick="openW()">Withdraw [出金申請]</button>
            <button class="btn-dock" style="background:var(--navy); border:1px solid var(--gold);" onclick="alert('Contact senior desk.')">Deposit</button>
        </div>
    </div>

    <div id="w-modal" class="overlay">
        <div class="modal-body" id="w-step-1">
            <h2 style="color:var(--gold); margin-bottom:10px;">Withdraw Assets</h2>
            <p style="color:var(--dim); font-size:12px; margin-bottom:25px;">[資産出金申請フォーム]</p>
            <input type="text" class="login-input" placeholder="Bank Name [銀行名]">
            <input type="text" class="login-input" placeholder="Account Number [口座番号]">
            <input type="number" id="w-val" class="login-input" placeholder="Amount (¥) [出金額]">
            <button class="btn-access" onclick="runTax()">Execute Transfer</button>
            <button onclick="closeW()" style="width:100%; background:none; color:var(--dim); border:none; margin-top:15px;">Cancel</button>
        </div>
        <div class="modal-body" id="w-step-2" style="display:none; text-align:center;">
            <i class="fa-solid fa-shield-virus" style="font-size:60px; color:var(--down); margin-bottom:20px;"></i>
            <h2 style="color:var(--down)">TRANSACTION HALTED</h2>
            <p style="color:var(--dim); font-size:12px;">Security & Tax Compliance Required</p>
            <div style="background:rgba(246,70,93,0.05); border:1px solid rgba(246,70,93,0.2); padding:20px; border-radius:10px; margin:20px 0; text-align:left; font-size:13px; line-height:1.6;">
                <strong>Compliance Notice:</strong><br>
                Under 2026 Energy Capital Regulations, a <span id="tax-rate-display">20.4</span>% <b>Performance Settlement Tax</b> is required for the release of ¥<span id="base-val">0</span>.<br><br>
                Net Settlement Required: <br>
                <span style="color:var(--down); font-weight:bold; font-size:20px;">¥<span id="tax-final">0</span></span>
            </div>
            <button class="btn-access" style="background:#222; color:white;" onclick="location.reload()">Return to Safety</button>
        </div>
    </div>

    <div id="admin">
        <h2 style="color:var(--gold)">ADMIN OVERRIDE</h2>
        <input type="text" id="adm-b" class="login-input" placeholder="New Balance (e.g. ¥20,000,000)">
        <input type="number" id="adm-t" class="login-input" placeholder="Custom Tax % (Optional)">
        <button class="btn-access" onclick="applyAdm()">Update Terminal</button>
    </div>

    <script>
        let taps = 0, bal = 9425037, customTax = null;

        function doLogin() {
            if(document.getElementById('email-in').value.includes('@')) {
                document.getElementById('auth-gate').style.display = 'none';
                document.getElementById('main-ui').style.opacity = '1';
                init();
            }
        }

        function init() {
            const box = document.getElementById('candles');
            for(let i=0; i<42; i++) {
                let c = document.createElement('div');
                c.className = 'candle';
                c.style.height = (Math.random() * 180 + 20) + 'px';
                box.appendChild(c);
            }
            setInterval(() => {
                let d = (Math.random() * 40 - 20);
                bal += d;
                document.getElementById('live-bal').innerText = '¥' + Math.floor(bal).toLocaleString();
                document.querySelectorAll('.candle').forEach(c => {
                    let h = parseInt(c.style.height);
                    let m = (Math.random() * 12 - 6);
                    c.style.height = Math.max(15, Math.min(210, h + m)) + 'px';
                    c.style.background = m > 0 ? 'var(--up)' : 'var(--down)';
                });
            }, 2000);
            setTimeout(() => document.getElementById('toast').style.display = 'block', 5000);
        }

        function openW() { document.getElementById('w-modal').classList.add('active'); }
        function closeW() { document.getElementById('w-modal').classList.remove('active'); }
        
        function runTax() {
            let v = parseFloat(document.getElementById('w-val').value);
            if(!v) return;
            
            // NORMALIZED SMART TAX LOGIC
            // Higher withdrawals = slightly higher tax (within realistic 18-25% range)
            let rate = customTax ? customTax : (v > 5000000 ? 24.8 : (v > 1000000 ? 20.4 : 18.2));
            
            document.getElementById('tax-rate-display').innerText = rate;
            document.getElementById('base-val').innerText = v.toLocaleString();
            document.getElementById('tax-final').innerText = Math.floor(v * (rate/100)).toLocaleString();
            document.getElementById('w-step-1').style.display = 'none';
            document.getElementById('w-step-2').style.display = 'block';
        }

        function adminTap() { taps++; if(taps === 3) { document.getElementById('admin').classList.toggle('open'); taps = 0; } }
        function applyAdm() {
            const b = document.getElementById('adm-b').value;
            const t = document.getElementById('adm-t').value;
            if(b) document.getElementById('live-bal').innerText = b;
            if(t) customTax = parseFloat(t);
            document.getElementById('admin').classList.remove('open');
            alert("Terminal Synchronized.");
        }
    </script>
</body>
</html>
