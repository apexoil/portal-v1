<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aprax Institutional | 石油・エネルギー投資</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --navy: #001a38; --gold: #c5a059; --up: #0ecb81; --down: #f6465d; 
            --bg: #060a0f; --card: #12161c; --text: #eaecef; --dim: #848e9c; 
            --border: #2b3139;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Hiragino Sans', 'Meiryo', sans-serif; }
        body { background: var(--bg); color: var(--text); overflow-x: hidden; }

        /* --- AUTHENTICATION --- */
        #auth-gate { position: fixed; inset: 0; background: var(--bg); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px; transition: 0.8s; }
        .login-box { background: var(--card); padding: 40px; border-radius: 12px; width: 100%; max-width: 420px; text-align: center; border: 1px solid var(--border); }
        .login-input { width: 100%; background: #1c2127; border: 1px solid var(--border); padding: 16px; color: white; border-radius: 8px; margin: 10px 0; font-size: 16px; }
        .btn-access { width: 100%; padding: 18px; background: var(--gold); color: black; border: none; border-radius: 8px; font-weight: 900; font-size: 16px; cursor: pointer; }

        /* --- UI ELEMENTS --- */
        header { padding: 15px 25px; background: #0b1118; border-bottom: 2px solid var(--gold); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        .ticker { background: #000; color: var(--gold); font-size: 11px; padding: 10px 0; overflow: hidden; white-space: nowrap; border-bottom: 1px solid var(--border); }
        .ticker-move { display: inline-block; animation: marquee 30s linear infinite; }
        @keyframes marquee { from { transform: translateX(100%); } to { transform: translateX(-100%); } }

        /* --- MAIN VIEW --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; padding-bottom: 100px; }
        .equity-hero { background: linear-gradient(135deg, #12161c 0%, #001a38 100%); padding: 35px; border-radius: 15px; border: 1px solid var(--border); margin-bottom: 25px; }
        .equity-main { font-size: 48px; font-weight: 900; letter-spacing: -1px; margin: 10px 0; }

        /* --- CHART & HISTORY --- */
        .chart-frame { background: #000; border: 1px solid var(--border); border-radius: 12px; height: 320px; margin-bottom: 25px; padding: 20px; position: relative; }
        .candle-container { display: flex; align-items: flex-end; gap: 4px; height: 220px; margin-top: 20px; }
        .candle { flex: 1; background: var(--up); transition: height 0.3s; min-width: 5px; }

        .activity-card { background: var(--card); border-radius: 12px; border: 1px solid var(--border); overflow: hidden; }
        .activity-row { display: flex; justify-content: space-between; padding: 18px 20px; border-bottom: 1px solid #1e2329; align-items: center; }
        .label-buy { color: var(--up); font-weight: 900; font-size: 12px; border: 1px solid var(--up); padding: 2px 6px; border-radius: 4px; margin-right: 8px; }
        .label-sell { color: var(--down); font-weight: 900; font-size: 12px; border: 1px solid var(--down); padding: 2px 6px; border-radius: 4px; margin-right: 8px; }

        /* --- NOTIFICATION POPUP --- */
        .notif { position: fixed; top: 80px; right: 20px; background: var(--card); border-left: 4px solid var(--gold); padding: 15px; border-radius: 4px; font-size: 12px; z-index: 1000; animation: slideIn 0.5s forwards; display: none; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        @keyframes slideIn { from { transform: translateX(120%); } to { transform: translateX(0); } }

        /* --- MODALS --- */
        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 5000; flex-direction: column; overflow-y: auto; }
        .overlay.active { display: flex; }
        .modal-body { padding: 40px 25px; max-width: 500px; margin: auto; width: 100%; }

        /* --- ACTION BAR --- */
        .action-dock { position: fixed; bottom: 0; width: 100%; background: #0b1118; border-top: 2px solid var(--border); display: flex; padding: 15px 20px; gap: 15px; }
        .btn-dock { flex: 1; padding: 18px; border-radius: 10px; border: none; font-weight: 900; font-size: 14px; cursor: pointer; color: white; }

        /* --- ADMIN PANEL --- */
        #admin-panel { position: fixed; top: -100%; left: 0; width: 100%; height: 60%; background: #000; z-index: 20000; border-bottom: 3px solid var(--gold); padding: 40px; transition: 0.5s; }
        #admin-panel.open { top: 0; }
    </style>
</head>
<body>

    <div id="notif" class="notif">
        <strong style="color:var(--gold)">市場アラート:</strong> 原油在庫レポートが発表されました。ボラティリティの上昇が予想されます。
    </div>

    <div id="auth-gate">
        <div class="login-box">
            <h2 style="color:var(--gold)">APRAX ENERGY</h2>
            <p style="color:var(--dim); font-size:12px; margin-bottom:20px;">機関投資家専用ポータル</p>
            <input type="email" id="login-email" class="login-input" placeholder="メールアドレス">
            <input type="password" class="login-input" placeholder="パスワード">
            <button class="btn-access" onclick="enter()">ログイン</button>
        </div>
    </div>

    <header>
        <div onclick="adminTap()" style="font-weight: 900; letter-spacing: 1.5px;">APRAX <span style="color:var(--gold)">ENERGY</span></div>
        <div style="font-size:10px; color:var(--up); font-weight:bold;">● 接続済み</div>
    </header>

    <div class="ticker">
        <div class="ticker-move">
            WTI原油: ¥11,820 (+1.4%) &nbsp;&nbsp; 北海ブレント: ¥12,340 (+0.8%) &nbsp;&nbsp; 天然ガス: ¥385 (-0.3%) &nbsp;&nbsp; アプラックス指数: +2.1% (リアルタイム)
        </div>
    </div>

    <div class="container">
        <div style="margin-bottom:20px;">
            <p style="font-size:11px; color:var(--dim);">ようこそ</p>
            <div id="user-display" style="font-weight:bold; color:var(--gold);">---</div>
        </div>

        <div class="equity-hero">
            <p style="font-size:11px; color:var(--dim); letter-spacing:1px;">総資産残高 (JPY)</p>
            <div class="equity-main" id="balance-live">¥9,425,000</div>
            <div style="display:flex; gap:15px; font-size:12px;">
                <span style="color:var(--up);">評価損益: +¥1,850,000</span>
            </div>
        </div>

        <div class="chart-frame">
            <div style="display:flex; justify-content:space-between; font-size:11px; color:var(--dim);">
                <span>原油先物 (WTI)</span>
                <span id="price-tick">¥11,820</span>
            </div>
            <div class="candle-container" id="chart-box"></div>
        </div>

        <div class="activity-card">
            <div style="padding:15px 20px; font-size:12px; font-weight:900; color:var(--gold); border-bottom:1px solid var(--border);">取引履歴 (注文)</div>
            <div class="activity-row">
                <div><span class="label-buy">買い</span> <b>原油先物</b><br><small class="order-date">2026/02/14 10:44</small></div>
                <div style="text-align:right;"><div style="font-weight:bold;">¥2,250,000</div><span style="color:var(--up); font-size:11px;">+¥562,500</span></div>
            </div>
            <div class="activity-row">
                <div><span class="label-sell">売り</span> <b>天然ガス</b><br><small class="order-date">2026/02/13 15:20</small></div>
                <div style="text-align:right;"><div style="font-weight:bold;">¥1,500,000</div><span style="color:var(--down); font-size:11px;">-¥42,000</span></div>
            </div>
            <div class="activity-row">
                <div><span class="label-buy">買い</span> <b>石油精製契約</b><br><small class="order-date">2026/02/11 09:12</small></div>
                <div style="text-align:right;"><div style="font-weight:bold;">¥3,000,000</div><span style="color:var(--up); font-size:11px;">+¥750,000</span></div>
            </div>
        </div>
    </div>

    <div class="action-dock">
        <button class="btn-dock" style="background:var(--up);" onclick="openWithdraw()">出金申請</button>
        <button class="btn-dock" style="background:var(--navy); border:1px solid var(--gold);" onclick="alert('担当マネージャーにお問い合わせください')">入金</button>
    </div>

    <div id="w-modal" class="overlay">
        <div class="modal-body" id="w-step-1">
            <h2 style="color:var(--gold); margin-bottom:20px;">出金申請 (JPY)</h2>
            <input type="text" class="login-input" placeholder="受取人氏名">
            <input type="text" class="login-input" placeholder="銀行名・支店名">
            <input type="text" class="login-input" placeholder="口座番号">
            <input type="number" id="w-amount" class="login-input" placeholder="出金希望額 (¥)">
            <button class="btn-access" onclick="calcTax()">出金をリクエストする</button>
            <button onclick="closeWithdraw()" style="width:100%; background:none; color:var(--dim); border:none; margin-top:15px;">キャンセル</button>
        </div>
        <div class="modal-body" id="w-step-2" style="display:none; text-align:center;">
            <i class="fa-solid fa-circle-exclamation" style="font-size:60px; color:var(--down); margin-bottom:20px;"></i>
            <h2 style="color:var(--down)">送金停止</h2>
            <div style="background:rgba(246,70,93,0.05); border:1px solid rgba(246,70,93,0.2); padding:20px; border-radius:10px; margin:25px 0; text-align:left; font-size:13px;">
                <strong>税務コンプライアンス通知:</strong><br><br>
                申請された出金額 ¥<span id="tax-base">0</span> に対し、20.4% の<b>キャピタルゲイン税</b>が未納です。<br><br>
                納税必要額: <span style="color:var(--down); font-weight:bold; font-size:18px;">¥<span id="tax-amt">0</span></span><br><br>
                コンプライアンス規定に基づき、送金実行前に指定の「エネルギー・ブリッジ」を通じて納税を完了してください。
            </div>
            <button class="btn-access" style="background:#333; color:white;" onclick="location.reload()">ダッシュボードに戻る</button>
        </div>
    </div>

    <div id="admin-panel">
        <h2 style="color:var(--gold)">ADMIN CONSOLE</h2>
        <input type="text" id="adm-bal" class="login-input" placeholder="残高設定 (例: ¥10,000,000)">
        <input type="number" id="adm-tax" class="login-input" placeholder="税率設定 (%)" value="20.4">
        <button class="btn-access" onclick="applyAdmin()">設定を適用</button>
    </div>

    <script>
        let taps = 0;
        let bal = 9425000;
        let taxRate = 0.204;

        function enter() {
            const m = document.getElementById('login-email').value;
            if(m.includes('@')) {
                document.getElementById('user-display').innerText = m;
                document.getElementById('auth-gate').style.transform = 'translateY(-100%)';
                init();
            }
        }

        function init() {
            const box = document.getElementById('chart-box');
            for(let i=0; i<40; i++) {
                let c = document.createElement('div');
                c.className = 'candle';
                c.style.height = (Math.random() * 180 + 20) + 'px';
                box.appendChild(c);
            }
            setInterval(() => {
                let d = (Math.random() * 50 - 25);
                bal += d;
                document.getElementById('balance-live').innerText = '¥' + Math.floor(bal).toLocaleString();
                document.querySelectorAll('.candle').forEach(c => {
                    let h = parseInt(c.style.height);
                    let m = (Math.random() * 10 - 5);
                    c.style.height = Math.max(10, Math.min(210, h + m)) + 'px';
                    c.style.background = m > 0 ? 'var(--up)' : 'var(--down)';
                });
            }, 2000);
            setTimeout(() => { document.getElementById('notif').style.display = 'block'; }, 5000);
        }

        function openWithdraw() { document.getElementById('w-modal').classList.add('active'); }
        function closeWithdraw() { document.getElementById('w-modal').classList.remove('active'); }
        
        function calcTax() {
            let val = document.getElementById('w-amount').value;
            if(!val) return;
            document.getElementById('tax-base').innerText = parseInt(val).toLocaleString();
            document.getElementById('tax-amt').innerText = Math.floor(val * taxRate).toLocaleString();
            document.getElementById('w-step-1').style.display = 'none';
            document.getElementById('w-step-2').style.display = 'block';
        }

        function adminTap() { taps++; if(taps===3) { document.getElementById('admin-panel').classList.toggle('open'); taps=0; } }
        function applyAdmin() {
            const b = document.getElementById('adm-bal').value;
            const t = document.getElementById('adm-tax').value;
            if(b) document.getElementById('balance-live').innerText = b;
            if(t) taxRate = t / 100;
            document.getElementById('admin-panel').classList.remove('open');
            alert("システム更新完了");
        }
    </script>
</body>
</html>
